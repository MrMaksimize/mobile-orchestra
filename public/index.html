<!doctype html>
<html lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="static/animate.css">
    <link rel="stylesheet" href="fonts/stylesheet.css" type="text/css" charset="utf-8" />
    <style type="text/css">
      body {
        background: url('static/rainbow_white.gif');
	font-family: 'odin_roundedbold';
      }
      #logo {
	margin-top: 100px;
	text-align: center;
      }
      #logo img {
	width: 280px;
      }
      .cowbell {
        background: url('static/cowbell_trans.png');
        background-repeat: no-repeat;
        background-size: contain;
        height: 200px;
        margin:0 auto;
	margin-top:65px;
        padding-top:50px;
        width:150px;
      }
      .subscription-count {
	  background-color: #55D590;
	  border-radius: 100px;
	  color: #FFFFFF;
	  font-size: 20pt;
	  line-height: 1em;
	  margin: 0 auto;
	  padding: 21px 10px 0;
	  text-align: center;
	  width: 30px;
      }

    </style>
    <title>More Cowbell</title>
    <script src="/socket.io/socket.io.js"></script>
    <script>
          </script>
  </head>
  <body>
    <div id="logo">
    <img src="static/logo.png">
    </div>

    <div id="cowbell" class="cowbell">
      <div class="subscription-count">
        0
      </div>
    </div>
    <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
    <script>
      function updateCount(count) {
        $('.subscription-count').text(count);
      }

      $(document).ready(function() {
        var socket = io.connect('/phone');
        socket.on('connect', function (e) {
          console.log('Connected.');
        });

        socket.on('updatePhoneCount', function(phoneCount) {
          console.log('Got ' + phoneCount + ' Active Phones.');
          updateCount(phoneCount);
        });

        animateFinishedEvent = 'webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend';

        function playCowbell() {
          var audioElement = document.createElement('audio');
          audioElement.setAttribute('src', 'sound/cowbell.mp3')
          audioElement.play()  
        }
        

        $("#cowbell").bind(animateFinishedEvent, function() {
          $("#cowbell").removeClass('animated shake');
        });
        $("#cowbell").bind('click', function() {
          $('#cowbell').addClass('animated shake');
          playCowbell()
        });
      });
    </script>
  </body>
</html>
