<!DOCTYPE html>
<html>
    <head>
        <title>SoundJS example
        </title>
        <script src="/socket.io/socket.io.js"></script>
        <script>
            var socket = io.connect('http://localhost:3000');
            socket.on('news', function (data) {
                console.log(data);
                socket.emit('my other event', { my: 'data' });
            });
    </script>

    </head>
    <body onload="init()">
        <h1 id="status">Mobile Orchestra</h1>
        <script src="http://code.createjs.com/soundjs-0.5.2.min.js"></script>
        <script>
            var displayMessage = null;

            function init() {
                displayMessage = document.getElementById("status");

                // if initializeDefaultPlugins returns false, we cannot play sound
                // @todo: Show the user a friendly error message if this isn't going to work.
                if (!createjs.Sound.initializeDefaultPlugins()) { return; }

                var audioPath = "assets/";
                var manifest = [
                    {id:"Cowbell", src:"cowbell.mp3"},
                    // @todo: Add more sounds!
                ];

//                createjs.Sound.alternateExtensions = ["ogg"];
                createjs.Sound.addEventListener("fileload", handleLoad);
                createjs.Sound.registerManifest(manifest, audioPath);
            }

            function handleLoad(event) {
                displayMessage.addEventListener("click", handleClick, false);
                displayMessage.innerHTML = "Touch to begin!";
            }

            function handleClick(event) {
                displayMessage.innerHTML = "More cowbell!";
//                createjs.Sound.play(event.src);
                createjs.Sound.play("Cowbell");
            }
        </script>
    </body>
</html>
